<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.FileSystem.FunFS.API.FileSystem</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-FileSystem-FunFS-API-FileSystem.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Data.FileSystem.FunFS.API.FileSystem</p></div><div id="description"><p class="caption">Description</p><div class="doc"><ul><li>Module      : Data.FileSystem.FunFS.API.FileSystem</li><li>Description : FileSystem state and FS monad.</li><li>Copyright   : (c) 2017-2018 Chris Swinchatt</li><li>License     : MIT</li><li>Maintainer  : Chris Swinchatt <a href="c.swinchatt1@uni.brighton.ac.uk">c.swinchatt1@uni.brighton.ac.uk</a></li><li>Stability   : experimental</li><li>Portability : portable</li></ul></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:FileSystem">FileSystem</a><ul class="subs"><li>= <a href="#v:NotMounted">NotMounted</a></li><li>| <a href="#v:FileSystem">FileSystem</a> { <ul class="subs"><li><a href="#v:volume">volume</a> :: <a href="Data-FileSystem-FunFS-Ext2-Volume.html#t:Volume">Volume</a></li><li><a href="#v:handles">handles</a> :: [Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>]</li><li><a href="#v:rootDirectory">rootDirectory</a> :: <a href="Data-FileSystem-FunFS-Ext2-Directory.html#t:Directory">Directory</a></li></ul> }</li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:FS">FS</a> a = State <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a> a</li><li class="src short"><a href="#v:get">get</a> :: Monad m =&gt; StateT s m s</li><li class="src short"><a href="#v:put">put</a> :: Monad m =&gt; s -&gt; StateT s m ()</li><li class="src short"><a href="#v:sync">sync</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> a -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a> -&gt; IO a</li><li class="src short"><a href="#v:appendFDHandleInfo">appendFDHandleInfo</a> :: <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a> -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> Int</li><li class="src short"><a href="#v:updateFDHandleInfo">updateFDHandleInfo</a> :: Int -&gt; (Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a> -&gt; Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>) -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> (Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>)</li><li class="src short"><a href="#v:isInUse">isInUse</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> Bool</li><li class="src short"><a href="#v:getStatistics">getStatistics</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> String</li><li class="src short"><a href="#v:openHandles">openHandles</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a> -&gt; [<a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>]</li><li class="src short"><a href="#v:getFDHandleInfo">getFDHandleInfo</a> :: Int -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> (Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>)</li><li class="src short"><a href="#v:haveFDHandleInfo">haveFDHandleInfo</a> :: Int -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> Bool</li><li class="src short"><a href="#v:maybeHI">maybeHI</a> :: a -&gt; (<a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a> -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> a) -&gt; Int -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FileSystem" class="def">FileSystem</a> <a href="#t:FileSystem" class="selflink">#</a></p><div class="doc"><p>FileSystem.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NotMounted" class="def">NotMounted</a></td><td class="doc"><p>An invalid/unmounted filesystem.
 | A mounted filesystem.</p></td></tr><tr><td class="src"><a id="v:FileSystem" class="def">FileSystem</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:volume" class="def">volume</a> :: <a href="Data-FileSystem-FunFS-Ext2-Volume.html#t:Volume">Volume</a></dfn><div class="doc"><p>Ext2 volume.</p></div></li><li><dfn class="src"><a id="v:handles" class="def">handles</a> :: [Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>]</dfn><div class="doc"><p>List of handles.</p></div></li><li><dfn class="src"><a id="v:rootDirectory" class="def">rootDirectory</a> :: <a href="Data-FileSystem-FunFS-Ext2-Directory.html#t:Directory">Directory</a></dfn><div class="doc"><p>The root directory.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:FileSystem" class="caption collapser" onclick="toggleSection('i:FileSystem')">Instances</p><div id="section.i:FileSystem" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:FileSystem:Show:1" class="instance expander" onclick="toggleSection('i:id:FileSystem:Show:1')"></span> Show <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a></span> <a href="#t:FileSystem" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:FileSystem:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a>] -&gt; ShowS</p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:FS" class="def">FS</a> a = State <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a> a <a href="#t:FS" class="selflink">#</a></p><div class="doc"><p>FS monad.</p></div></div><div class="top"><p class="src"><a id="v:get" class="def">get</a> :: Monad m =&gt; StateT s m s <a href="#v:get" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:put" class="def">put</a> :: Monad m =&gt; s -&gt; StateT s m () <a href="#v:put" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sync" class="def">sync</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> a -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a> -&gt; IO a <a href="#v:sync" class="selflink">#</a></p><div class="doc"><p>Apply a filesystem action to a mounted filesystem and return the result in IO. Due to lazy evaluation, filesystem
 operations are not evaluated until <code><a href="Data-FileSystem-FunFS-API-FileSystem.html#v:sync">sync</a></code> is called.</p></div></div><div class="top"><p class="src"><a id="v:appendFDHandleInfo" class="def">appendFDHandleInfo</a> :: <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a> -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> Int <a href="#v:appendFDHandleInfo" class="selflink">#</a></p><div class="doc"><p>Append the HandleInfo for a newly opened handle to a filesystem's list of open handles and get a file descriptor
 unique to it. It is NOT an error if there is already a handle to the same node, though it may cause strange
 behaviour.</p></div></div><div class="top"><p class="src"><a id="v:updateFDHandleInfo" class="def">updateFDHandleInfo</a> :: Int -&gt; (Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a> -&gt; Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>) -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> (Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>) <a href="#v:updateFDHandleInfo" class="selflink">#</a></p><div class="doc"><p>Update the HandleInfo referenced by a file descriptor by applying a function to it and return the result.
 It is an error if the file descriptor refers to a closed or otherwise invalid handle.</p></div></div><div class="top"><p class="src"><a id="v:isInUse" class="def">isInUse</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> Bool <a href="#v:isInUse" class="selflink">#</a></p><div class="doc"><p>Indicates whether the filesystem is in use, i.e. if there are open handles.</p></div></div><div class="top"><p class="src"><a id="v:getStatistics" class="def">getStatistics</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> String <a href="#v:getStatistics" class="selflink">#</a></p><div class="doc"><p>Get printable statistics about the filesystem.</p></div></div><div class="top"><p class="src"><a id="v:openHandles" class="def">openHandles</a> :: <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FileSystem">FileSystem</a> -&gt; [<a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>] <a href="#v:openHandles" class="selflink">#</a></p><div class="doc"><p>Get a list of currently open handles.</p></div></div><div class="top"><p class="src"><a id="v:getFDHandleInfo" class="def">getFDHandleInfo</a> :: Int -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> (Maybe <a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a>) <a href="#v:getFDHandleInfo" class="selflink">#</a></p><div class="doc"><p>Get the HandleInfo referenced by a file descriptor. If the handle is closed, the result will be Nothing.</p></div></div><div class="top"><p class="src"><a id="v:haveFDHandleInfo" class="def">haveFDHandleInfo</a> :: Int -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> Bool <a href="#v:haveFDHandleInfo" class="selflink">#</a></p><div class="doc"><p>Indicates whether a file descriptor is associated with an open handle.</p></div></div><div class="top"><p class="src"><a id="v:maybeHI" class="def">maybeHI</a> :: a -&gt; (<a href="Data-FileSystem-FunFS-API-HandleInfo.html#t:HandleInfo">HandleInfo</a> -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> a) -&gt; Int -&gt; <a href="Data-FileSystem-FunFS-API-FileSystem.html#t:FS">FS</a> a <a href="#v:maybeHI" class="selflink">#</a></p><div class="doc"><p>Helper for functions which execute conditionally on whether a handle is opened.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>